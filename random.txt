 @GetMapping("/all-with-permissions")
    public ResponseEntity<List<RoleInfo>> getAllRolesWithPermissions() {
        try {
            List<RoleInfo> rolesWithPermissions = roleService.getAllRolesWithPermissions();
            return new ResponseEntity<>(rolesWithPermissions, HttpStatus.OK);
        } catch (Exception e) {
            // Log the exception or handle it as needed
            return new ResponseEntity<>(HttpStatus.INTERNAL_SERVER_ERROR);
        }
    }
	
	 public List<RoleInfo> getAllRolesWithPermissions() {
        try {
            List<Role> roles = roleRepository.findAll();

            return roles.stream()
                    .map(role -> new RoleInfo(
                            role.getRoleRid(),
                            role.getRoleName(),
                            role.getRolePermissions().stream()
                                    .map(rolePermission -> new PermissionInfo(
                                            rolePermission.getPermission().getPermissionRid(),
                                            rolePermission.getPermission().getPermissionName()))
                                    .collect(Collectors.toSet())))
                    .collect(Collectors.toList());
        } catch (Exception e) {
            // Log the exception or handle it as needed
            throw new RuntimeException("Failed to fetch roles with permissions", e);
        }
    }