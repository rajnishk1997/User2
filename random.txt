@Query("SELECT u FROM User u WHERE " +
       "(u.userRid = :managerId AND EXISTS (SELECT 1 FROM u.userRoles ur JOIN ur.role r WHERE r.roleName = 'Auditor')) " + // Include the manager if they are an auditor
       "OR (u.manager.userRid = :managerId AND EXISTS (SELECT 1 FROM u.userRoles ur JOIN ur.role r WHERE r.roleName = 'Auditor')) " + // Include if subordinates have auditor role
       "OR (u.manager.userRid IN (SELECT m.userRid FROM User m WHERE m.manager.userRid = :managerId))") // Check if the user is in the hierarchy below the specified manager
List<User> findAuditorsUnderManagerHierarchy(@Param("managerId") Integer managerId);
