@Query("SELECT u FROM User u WHERE u.isNewUser = false AND " +
       "(u.manager.userRid = :managerId AND EXISTS (SELECT r FROM u.userRoles ur JOIN ur.role r WHERE r.roleName = 'Auditor')) " +
       "OR (u.userRid = :managerId AND EXISTS (SELECT r FROM u.userRoles ur JOIN ur.role r WHERE r.roleName = 'Auditor'))")
List<User> findAuditorsUnderManagerHierarchy(@Param("managerId") Integer managerId);


@Query("SELECT u FROM User u WHERE u.isNewUser = false AND " +
       "(u.manager.userRid = :managerId AND EXISTS (SELECT r FROM u.userRoles ur JOIN ur.role r WHERE r.roleName = 'Auditor')) " +
       "OR (u.userRid = :managerId AND EXISTS (SELECT r FROM u.userRoles ur JOIN ur.role r WHERE r.roleName = 'Auditor'))")
List<User> findImmediateAuditorsUnderManager(@Param("managerId") Integer managerId);
